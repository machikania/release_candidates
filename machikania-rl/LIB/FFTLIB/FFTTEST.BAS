USECLASS FFTLIB
USEGRAPHIC
N=256:PRINT "N=";N
DIM B(N-1)
A=NEW(FFTLIB,N)
FOR I=0 TO N-1
 B#(I)=GOSUB#(FUNC1,I,N)
NEXT

A.FFT(B,0)
P=A.RE:Q=A.IM

POINT 0,100-INT(B#(0))
FOR I=1 TO N-1
 LINE ,I,100-INT(B#(I)),4
NEXT

FOR I=0 TO N/2-1
 LINE I,239,I,239-INT(SQRT#(P#(I)*P#(I)+Q#(I)*Q#(I))*10),2
NEXT

DO:WAIT 1:LOOP UNTIL INKEY()

A.IFFT(P,1)
P=A.RE
POINT 0,100-INT(P#(0))
FOR I=1 TO N-1
 LINE ,I,100-INT(P#(I)),5
NEXT

END

LABEL FUNC1
 VAR F,I,N
 I=ARGS(1):N=ARGS(2)
 F#=SIN#(FLOAT#(I)/FLOAT#(N)*2*PI#)*20+SIN#(FLOAT#(I*5)/FLOAT#(N)*2*PI#)*10+SIN#(FLOAT#(I*10)/FLOAT#(N)*2*PI#)*5
RETURN F#

LABEL FUNC2
 VAR F,I,N
 I=ARGS(1):N=ARGS(2)
 F#=FLOAT#(I%(N/2))-(FLOAT#(N)/4)+0.5
RETURN F#

LABEL FUNC3
 VAR F,I,N
 I=ARGS(1):N=ARGS(2)
 F#=FLOAT#(I/(N/2))*50-25
RETURN F#
