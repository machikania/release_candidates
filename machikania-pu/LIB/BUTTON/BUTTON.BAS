USECLASS BUTTON
B=NEW(BUTTON)
C=0
DO
 B.RD()
 CURSOR 0,10:PRINT C;" ";
 IF B.BRT2 THEN C=C+1
 IF B.BRTCT>60 THEN C=C+1
 IF B.BLT2 THEN C=C-1
 IF B.BLTCT>60 THEN C=C-1
 WAIT 1
LOOP



OPTION CLASSCODE

REM BUTTON Class
REM BUTTON.BAS
REM Field Bxx  not 0:Button xx is pressed
REM Field Bxx2 not 0:Button xx is pressed now
REM Field Bxx3 not 0:Button xx is released now
REM Filed BxxCT Button xx Pressed Time Counter

FIELD PUBLIC BTN
FIELD PUBLIC BUP,BDN,BLT,BRT,BST,BFR
FIELD PUBLIC BUP2,BDN2,BLT2,BRT2,BST2,BFR2
FIELD PUBLIC BUP3,BDN3,BLT3,BRT3,BST3,BFR3
FIELD PUBLIC BUPCT,BDNCT,BLTCT,BRTCT
FIELD PUBLIC BSTCT,BFRCT
FIELD PRIVATE OLDBTN,BTN2,BTN3

METHOD INIT
 BTN=0
RETURN

METHOD RD
 OLDBTN=BTN
 BTN=KEYS()
 BTN2=(OLDBTN XOR 63) AND BTN
 BTN3=(BTN XOR 63) AND OLDBTN

 BUP=BTN AND 1
 BDN=BTN AND 2
 BLT=BTN AND 4
 BRT=BTN AND 8
 BST=BTN AND 16
 BFR=BTN AND 32

 BUP2=BTN2 AND 1
 BDN2=BTN2 AND 2
 BLT2=BTN2 AND 4
 BRT2=BTN2 AND 8
 BST2=BTN2 AND 16
 BFR2=BTN2 AND 32

 BUP3=BTN3 AND 1
 BDN3=BTN3 AND 2
 BLT3=BTN3 AND 4
 BRT3=BTN3 AND 8
 BST3=BTN3 AND 16
 BFR3=BTN3 AND 32

 IF BUP THEN BUPCT=BUPCT+1 ELSE BUPCT=0
 IF BDN THEN BDNCT=BDNCT+1 ELSE BDNCT=0
 IF BLT THEN BLTCT=BLTCT+1 ELSE BLTCT=0
 IF BRT THEN BRTCT=BRTCT+1 ELSE BRTCT=0
 IF BST THEN BSTCT=BSTCT+1 ELSE BSTCT=0
 IF BFR THEN BFRCT=BFRCT+1 ELSE BFRCT=0
RETURN
